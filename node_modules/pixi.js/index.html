<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <title>Test Page</title>
   <script src="bin/pixi.js"></script>
</head>
<body>
   <script>
var OutlineHelper = {
	getOutline: function (sprite, thickness) {
		var copy = new PIXI.Sprite(sprite.texture);	
		copy.position = sprite.position;
		copy.anchor = sprite.anchor;
		copy.scale = sprite.scale;
		
		var matrixAlphaToRed =  [
			0,0,0,1,
			0,0,0,0,
			0,0,0,0,
			0,0,0,1
		];
		var alphaToRed = new PIXI.filters.ColorMatrixFilter();	
		alphaToRed.matrix = matrixAlphaToRed;

		
		var matrixRedToAlpha =  [
			1,0,0,0,
			0,0,0,0,
			0,0,0,0,
			1,0,0,0
		];
		var redToAlpha = new PIXI.filters.ColorMatrixFilter();	
		redToAlpha.matrix = matrixRedToAlpha;

		
		var kernel = [
			1, 2, 1,
			2, 0, 2,
			1, 2, 1
		];

		var filters = [alphaToRed];
		
		
		for (var i = 0; i < thickness; i++) {
			filters.push(new PIXI.filters.ConvolutionFilter(kernel, 2048, 2048));
		}
		filters.push(redToAlpha);
		
		copy.filters = filters;		

		return copy;
	}

};

/////////////////////////////////////////////////////////////////////////////////////////////////

var stage, renderer;

function init() {
	stage = new PIXI.Container();
	renderer = PIXI.autoDetectRenderer(700, 500);

	document.body.appendChild(renderer.view);

	var imageUrl = 'http://i.imgur.com/ASyIE7b.png';

	PIXI.loader.add('img', imageUrl).load(function (loader, res) {
		var sprite = new PIXI.Sprite(res.img.texture);

		sprite.position.x = 200;
		sprite.position.y = 200;

		sprite.anchor.set(0.5, 0.5);

		var outline = OutlineHelper.getOutline(sprite, 2);

		outline.visible = false;

		stage.addChild(outline);
		stage.addChild(sprite);		

		sprite.interactive = true;
		sprite.on('mouseover', function () {
			outline.visible = true;
		});

		sprite.on('mouseout', function () {
			outline.visible = false;
		});

		update();
	});
}

function update() {
	requestAnimationFrame(update);
	renderer.render(stage);
}

window.onload = init;
    </script>
</body>
</html>
